# Directory structure

Related reading:

* [Component design](./component-design)

The top-level directory structure for Atlaskit looks like the following diagram:

```
Atlaskit
├─ build ·········· Build packages
├─ docs ··········· Project documentation
├─ flow-typed ····· Flow types for untyped dependencies
├─ packages ······· Public packages
├─ patterns ······· Overarching component patterns
├─ releases ······· Release documentation
├─ typings ········ Exported Flow / TypeScript types
├─ website ········ Website package
└─ package.json ··· Project config
```

## Build

The `build` directory is where all build tooling goes that isn't handled by our tools directly.

## Docs

The `docs` directory is where all project documentation lives. It is displayed on the website under "Getting started > Documentation" and is the main source of Atlaskit's documentation.

## Packages

The `packages` directory is where all of our public NPM packages are contained. Each subfolder is broken down in to another directory that allows us to separate which packages belong to certain teams, and also to make running a subset of build tasks only for certain sets of packages.

It may look something like:

```
└─ packages
  ├─ elements
  ├─ fabric
  └─ utils
```

### Per-package structure

The structure leading to each package will look something like:

```
└─ packages
  └─ elements
    └─ avatar
      ├─ dist ··········· Built files, autogenerated
      ├─ docs ··········· Package-specific documentation
      ├─ examples ······· Package-specific examples
      ├─ node_modules ··· NPM dependencies
      ├─ src ············ Package source
      ├─ CHANGELOG.md ··· Entire change history for the package
      ├─ index.js ······· Private entry point for tests
      ├─ LICENSE ········ Package license
      └─ package.json ··· NPM package configuration
```

The details of each directory in each package is explained in greater detail further down.

#### `dist`

The `dist` directory contains the bundles we ship to our NPM package. We ship both CommonJS and ES Modules to NPM.

```
└─ packages
  └─ elements
    └─ avatar
      └─ dist
        ├─ cjs
        ├─ esm
        └─ package.json
```

#### `docs`

The `docs` directory houses the docs specific to the respective package. The docs are written in Markdown and are prefixed with a number to maintain order.

```
└─ packages
  └─ elements
    └─ avatar
      └─ docs
        ├─ 01-intro.md
        └─ 02-another-page.md
```

#### `examples`

Like the `docs` directory, the purpose of the `examples` directory is to document behaviour, but in a much more fine-grained fashion. It shows you an example and the code to create the corresponding example.

When not writing unit tests, this is where you'll spend most of your development time when viewing your components as you write your source code. It's preferable that you write your tests first, but you can have both running at the same time so as you make updates, you can see your test output *and* your component output.

```
└─ packages
  └─ elements
    └─ avatar
      └─ examples
        ├─ 01-basic.js
        └─ 02-another-example.js
```

#### `node_modules`

This is where the NPM packages are kept. Bolt will automatically populate this, you don't have to manually install the dependencies for each package.

#### `src`

Each package's source should contain a similar directory structure. Essentially this rule follows the convention that anything that has a default export must be `CamelCapped` or `camelCased`. Everything else is `dash-cased`. This rule is expanded into the following that goes into greater detail about how certain things in the structure should look (i.e. styled-components / tests).

1. There must always be an `index.js` that exports your public API.
2. Each file that has a default export, must *only* have a default export - no named exports. This simplifies the heuristics to determine a name for the file.
3. The file name should be the name of the export. For example, if `Avatar` is a default export for a file, the file name should be `Avatar.js`. For a HoC, this might look something like `withAvatar`.
4. In lieu of a file, you may use a directory with an `index.js` file. For example, `Avatar/index.js`.
5. Styled components should go in a `styled.js` file, or you can use a `styled/index.js` file that exports sibling files with default exports that conform to #3 or #4. This should also follow something similar to #6 and have this for every level of components.
6. Tests should be in a `__tests__` that correspond to the level of files you're testing. A good rule of thumb is that the imports from your test file should reach up one directory. For example, `import Avatar from '../Avatar';`.

Your structure may look something like this:

```
└─ packages
  └─ elements
    └─ avatar
      └─ src
        ├─ __tests__ ············ Tests for Avatar.js, index.js, styled.js
        ├─ Avatar ··············· Directory form of Avatar.js
        │ ├─ __tests__ ·········· Tests for Avatar/index.js
        │ └─ index.js ··········· Default export for Avatar
        │ └─ styled ············· Directory for styled components
        │   ├─ __tests__ ········ Tests for Styled/index.js, MyComponent.js
        │   ├─ index.js ········· Exports MyComponent
        │   └─ MyComponent.js ··· Exported by index.js
        ├─ Avatar.js ············ Simpler form of Avatar/index.js
        ├─ index.js ············· Main entry point
        ├─ styled.js ············ Simpler form of styled/index.js
        └─ types.js ············· Type definitions
```

The key difference between the file and directory forms (i.e. `styled.js` vs `styled/index.js`) is how complex your component becomes. What matters here is that consistency is still very close and your imports do not change.

_The rules listed above are exhaustive. Anything outside of them are not supported. This includes things like leading underscores (_filename.js), underscored names (file_name.js) and dotted names (file.name.js)._

#### `CHANGELOG.md`

The changelog contains all of the relevant changes of the package, over time, in an easy-to-consume format. It also is searchable from the website if you want the changes for a particular version.

#### `index.js`

This `index.js` file exists for Jest so that it can resolve the actual source of the package as opposed to having to build the entire set of packages prior to running tests.

#### `LICENSE`

The `LICENSE` file contains the license for each package. Generally this is just the Apache 2 license.

#### `package.json`

The `package.json` file contains all the information and configuration that NPM needs to host our package.

#### `README.md`

The `README.md` file contains a introduction for each package.

## Patterns

The `patterns` directory is a single package that houses all of our overarching component patterns. For example, this may contain a rough implementation of `@atlaskit/navigation` for Jira.

## Releases

Contains the documentation for releases containing significant changes along with any migration guides.

## Website

The Atlaskit website is how we dogfood our components and also serves as our public documentation.
